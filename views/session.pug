extends layout

block extras
    link(rel="stylesheet", href="/stylesheets/overview.css")
    link(rel="stylesheet", href="/stylesheets/session.css")
    script(src="/javascripts/sessionview.js")

block content
    div#mainwrapper
        nav
            h2= topic.id
            h2=`${competitor.surename} ${competitor.lastname}`
            ul
                li Create Session
                li.showForm(value="-1") Create Question
                li
                    a(href=`/details/session?competitorid=${competitor.id}&topicid=${topic.id}`) Refresh
                li 
                    a(href=`/details?competitorid=${competitor.id}`) To Details
                li 
                    a(href="/overview") To Overview
                li 
                    a(href="/auth/logout") Logout
        main
            h2= `${topic.title}`
            div#stats
                div.stat
                    i.fas.fa-comment
                    div
                        p.statnumber= statistic.numberOfSessions
                        p Sessions
                div.stat
                    i.fas.fa-stopwatch
                    div
                        p.statnumber= statistic.averageSessionTime
                        p Average session time
                div.stat
                    i.fas.fa-star-half-alt
                    div
                        p.statnumber= statistic.averageAnswerRating
                        p Average answer rating
            if sessions
                - var counter = 1
                each session in sessions
                    div.session
                        aside.date= `Session ${counter} from ${session.date}`
                        aside.duration= `${session.duration} minutes`
                        if session.critiques
                            each critique in session.critiques
                                div.critique= critique.content
                    - counter++
            table
                tr
                    th Question
                    th Times asked
                    th Answerrating
                    th
                if questions
                    each question in questions
                        tr
                            td(id=`question_${question.id}_content`)= question.content
                            td= question.timesAsked
                                i.fas.fa-angle-double-up(value=1)
                                i.fas.fa-angle-double-down(value=-1)
                            td(id=`question_${question.id}_answerRating`)= question.answerRating
                            td
                                i.fas.fa-eye.showSession(value=question.id)
                                i.fas.fa-pencil-alt.showForm(value=question.id)
                                i.fas.fa-trash-alt.deleteTopic(value=question.id)

            div#formular                    
                form(action="/details/session", method="POST")
                    input.hidden(id="input_send",type="submit")
                    input.hidden(id="input_id", type="number", name="questionid", value='-1')
                    input.hidden(id="competitor_id", type="number", name="competitorid", value=competitor.id)
                    input.hidden(id="topic_id", type="number", name="topicid", value=topic.id)
                    div
                        label(for="question") Question
                        input(id="question", type="text", name="question", value='')
                    div
                        label(for="answerrating") Question
                        input(id="answerrating", type="text", name="answerrating", value='0')
                div.buttongroup
                    i.fas.fa-check-circle#formOk                    
                    i.fas.fa-times-circle#formCancel
                p#info